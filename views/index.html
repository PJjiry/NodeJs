<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
    />
    <title>Document</title>
</head>
<body>
<%= if(user) user.username %>
<h1><%= title.toUpperCase() %></h1>
<div id="todos">
    <%- include('_todos.html') %>
</div>

<form method="post" action="/todos">
    <label for="title">Nazev Todo</label>
    <input name="title" id="title" />
    <button type="submit">PÅ™idat todo</button>
</form>
</body>
</html>
<script>
    const ws = new WebSocket('ws://localhost:3000/ws');

    ws.addEventListener('message', event => {
        const {type, html} = JSON.parse(event.data);

        if (type === 'todos') {
            const el = document.getElementById("todos")
            el.innerHTML = html;
        }
    })
</script>
